{"ast":null,"code":"import * as tslib_1 from \"tslib\";\nimport TelemetryEvent from \"./TelemetryEvent\";\nimport { TELEMETRY_BLOB_EVENT_NAMES } from \"./TelemetryConstants\";\nimport { scrubTenantFromUri, hashPersonalIdentifier, prependEventNamePrefix } from \"./TelemetryUtils\";\nexport var EVENT_KEYS = {\n  AUTHORITY: prependEventNamePrefix(\"authority\"),\n  AUTHORITY_TYPE: prependEventNamePrefix(\"authority_type\"),\n  PROMPT: prependEventNamePrefix(\"ui_behavior\"),\n  TENANT_ID: prependEventNamePrefix(\"tenant_id\"),\n  USER_ID: prependEventNamePrefix(\"user_id\"),\n  WAS_SUCESSFUL: prependEventNamePrefix(\"was_successful\"),\n  API_ERROR_CODE: prependEventNamePrefix(\"api_error_code\"),\n  LOGIN_HINT: prependEventNamePrefix(\"login_hint\")\n};\nexport var API_CODE;\n\n(function (API_CODE) {\n  API_CODE[API_CODE[\"AcquireTokenRedirect\"] = 2001] = \"AcquireTokenRedirect\";\n  API_CODE[API_CODE[\"AcquireTokenSilent\"] = 2002] = \"AcquireTokenSilent\";\n  API_CODE[API_CODE[\"AcquireTokenPopup\"] = 2003] = \"AcquireTokenPopup\";\n  API_CODE[API_CODE[\"LoginRedirect\"] = 2004] = \"LoginRedirect\";\n  API_CODE[API_CODE[\"LoginPopup\"] = 2005] = \"LoginPopup\";\n})(API_CODE || (API_CODE = {}));\n\nexport var API_EVENT_IDENTIFIER;\n\n(function (API_EVENT_IDENTIFIER) {\n  API_EVENT_IDENTIFIER[\"AcquireTokenRedirect\"] = \"AcquireTokenRedirect\";\n  API_EVENT_IDENTIFIER[\"AcquireTokenSilent\"] = \"AcquireTokenSilent\";\n  API_EVENT_IDENTIFIER[\"AcquireTokenPopup\"] = \"AcquireTokenPopup\";\n  API_EVENT_IDENTIFIER[\"LoginRedirect\"] = \"LoginRedirect\";\n  API_EVENT_IDENTIFIER[\"LoginPopup\"] = \"LoginPopup\";\n})(API_EVENT_IDENTIFIER || (API_EVENT_IDENTIFIER = {}));\n\nvar ApiEvent =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(ApiEvent, _super);\n\n  function ApiEvent(correlationId, logger) {\n    var _this = _super.call(this, prependEventNamePrefix(\"api_event\"), correlationId) || this;\n\n    _this.logger = logger;\n    return _this;\n  }\n\n  Object.defineProperty(ApiEvent.prototype, \"apiEventIdentifier\", {\n    set: function (apiEventIdentifier) {\n      this.event[TELEMETRY_BLOB_EVENT_NAMES.ApiTelemIdConstStrKey] = apiEventIdentifier;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"apiCode\", {\n    set: function (apiCode) {\n      this.event[TELEMETRY_BLOB_EVENT_NAMES.ApiIdConstStrKey] = apiCode;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"authority\", {\n    set: function (uri) {\n      this.event[EVENT_KEYS.AUTHORITY] = scrubTenantFromUri(uri).toLowerCase();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"apiErrorCode\", {\n    set: function (errorCode) {\n      this.event[EVENT_KEYS.API_ERROR_CODE] = errorCode;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"tenantId\", {\n    set: function (tenantId) {\n      this.event[EVENT_KEYS.TENANT_ID] = this.logger.isPiiLoggingEnabled() && tenantId ? hashPersonalIdentifier(tenantId) : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"accountId\", {\n    set: function (accountId) {\n      this.event[EVENT_KEYS.USER_ID] = this.logger.isPiiLoggingEnabled() && accountId ? hashPersonalIdentifier(accountId) : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"wasSuccessful\", {\n    get: function () {\n      return this.event[EVENT_KEYS.WAS_SUCESSFUL] === true;\n    },\n    set: function (wasSuccessful) {\n      this.event[EVENT_KEYS.WAS_SUCESSFUL] = wasSuccessful;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"loginHint\", {\n    set: function (loginHint) {\n      this.event[EVENT_KEYS.LOGIN_HINT] = this.logger.isPiiLoggingEnabled() && loginHint ? hashPersonalIdentifier(loginHint) : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"authorityType\", {\n    set: function (authorityType) {\n      this.event[EVENT_KEYS.AUTHORITY_TYPE] = authorityType.toLowerCase();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"promptType\", {\n    set: function (promptType) {\n      this.event[EVENT_KEYS.PROMPT] = promptType.toLowerCase();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ApiEvent;\n}(TelemetryEvent);\n\nexport default ApiEvent;","map":{"version":3,"sources":["../../src/telemetry/ApiEvent.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import * as tslib_1 from \"tslib\";\r\nimport TelemetryEvent from \"./TelemetryEvent\";\r\nimport { TELEMETRY_BLOB_EVENT_NAMES } from \"./TelemetryConstants\";\r\nimport { scrubTenantFromUri, hashPersonalIdentifier, prependEventNamePrefix } from \"./TelemetryUtils\";\r\nexport var EVENT_KEYS = {\r\n    AUTHORITY: prependEventNamePrefix(\"authority\"),\r\n    AUTHORITY_TYPE: prependEventNamePrefix(\"authority_type\"),\r\n    PROMPT: prependEventNamePrefix(\"ui_behavior\"),\r\n    TENANT_ID: prependEventNamePrefix(\"tenant_id\"),\r\n    USER_ID: prependEventNamePrefix(\"user_id\"),\r\n    WAS_SUCESSFUL: prependEventNamePrefix(\"was_successful\"),\r\n    API_ERROR_CODE: prependEventNamePrefix(\"api_error_code\"),\r\n    LOGIN_HINT: prependEventNamePrefix(\"login_hint\")\r\n};\r\nexport var API_CODE;\r\n(function (API_CODE) {\r\n    API_CODE[API_CODE[\"AcquireTokenRedirect\"] = 2001] = \"AcquireTokenRedirect\";\r\n    API_CODE[API_CODE[\"AcquireTokenSilent\"] = 2002] = \"AcquireTokenSilent\";\r\n    API_CODE[API_CODE[\"AcquireTokenPopup\"] = 2003] = \"AcquireTokenPopup\";\r\n    API_CODE[API_CODE[\"LoginRedirect\"] = 2004] = \"LoginRedirect\";\r\n    API_CODE[API_CODE[\"LoginPopup\"] = 2005] = \"LoginPopup\";\r\n})(API_CODE || (API_CODE = {}));\r\nexport var API_EVENT_IDENTIFIER;\r\n(function (API_EVENT_IDENTIFIER) {\r\n    API_EVENT_IDENTIFIER[\"AcquireTokenRedirect\"] = \"AcquireTokenRedirect\";\r\n    API_EVENT_IDENTIFIER[\"AcquireTokenSilent\"] = \"AcquireTokenSilent\";\r\n    API_EVENT_IDENTIFIER[\"AcquireTokenPopup\"] = \"AcquireTokenPopup\";\r\n    API_EVENT_IDENTIFIER[\"LoginRedirect\"] = \"LoginRedirect\";\r\n    API_EVENT_IDENTIFIER[\"LoginPopup\"] = \"LoginPopup\";\r\n})(API_EVENT_IDENTIFIER || (API_EVENT_IDENTIFIER = {}));\r\nvar ApiEvent = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ApiEvent, _super);\r\n    function ApiEvent(correlationId, logger) {\r\n        var _this = _super.call(this, prependEventNamePrefix(\"api_event\"), correlationId) || this;\r\n        _this.logger = logger;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ApiEvent.prototype, \"apiEventIdentifier\", {\r\n        set: function (apiEventIdentifier) {\r\n            this.event[TELEMETRY_BLOB_EVENT_NAMES.ApiTelemIdConstStrKey] = apiEventIdentifier;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ApiEvent.prototype, \"apiCode\", {\r\n        set: function (apiCode) {\r\n            this.event[TELEMETRY_BLOB_EVENT_NAMES.ApiIdConstStrKey] = apiCode;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ApiEvent.prototype, \"authority\", {\r\n        set: function (uri) {\r\n            this.event[EVENT_KEYS.AUTHORITY] = scrubTenantFromUri(uri).toLowerCase();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ApiEvent.prototype, \"apiErrorCode\", {\r\n        set: function (errorCode) {\r\n            this.event[EVENT_KEYS.API_ERROR_CODE] = errorCode;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ApiEvent.prototype, \"tenantId\", {\r\n        set: function (tenantId) {\r\n            this.event[EVENT_KEYS.TENANT_ID] = this.logger.isPiiLoggingEnabled() && tenantId ?\r\n                hashPersonalIdentifier(tenantId)\r\n                : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ApiEvent.prototype, \"accountId\", {\r\n        set: function (accountId) {\r\n            this.event[EVENT_KEYS.USER_ID] = this.logger.isPiiLoggingEnabled() && accountId ?\r\n                hashPersonalIdentifier(accountId)\r\n                : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ApiEvent.prototype, \"wasSuccessful\", {\r\n        get: function () {\r\n            return this.event[EVENT_KEYS.WAS_SUCESSFUL] === true;\r\n        },\r\n        set: function (wasSuccessful) {\r\n            this.event[EVENT_KEYS.WAS_SUCESSFUL] = wasSuccessful;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ApiEvent.prototype, \"loginHint\", {\r\n        set: function (loginHint) {\r\n            this.event[EVENT_KEYS.LOGIN_HINT] = this.logger.isPiiLoggingEnabled() && loginHint ?\r\n                hashPersonalIdentifier(loginHint)\r\n                : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ApiEvent.prototype, \"authorityType\", {\r\n        set: function (authorityType) {\r\n            this.event[EVENT_KEYS.AUTHORITY_TYPE] = authorityType.toLowerCase();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ApiEvent.prototype, \"promptType\", {\r\n        set: function (promptType) {\r\n            this.event[EVENT_KEYS.PROMPT] = promptType.toLowerCase();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ApiEvent;\r\n}(TelemetryEvent));\r\nexport default ApiEvent;\r\n//# sourceMappingURL=ApiEvent.js.map"]},"metadata":{},"sourceType":"module"}